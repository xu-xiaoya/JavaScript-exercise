<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<style type="text/css">
dl { 
    float: left; 
    margin: 4px 20px; 
    border: solid 1px blue; 
    padding: 12px; 
}
dl span { 
    color: red; 
    float: right; 
}
dd { 
    width: 360px; 
}
footer { 
    display: none; 
}
</style>
<script type="text/javascript">
function createrange() {
    var range1 = document.createRange();    //定义范围二
    var range2 = document.createRange();    //定义范围二
    var main= document.getElementById("main");

    range1.selectNode(main);            //设置范围一为article及其子元素
    range2.selectNodeContents(main);    //设置范围二为article的子元素
    
    var footer = document.getElementsByTagName("footer")[0];
	footer.style.display = "block";

    //显示范围1的开始点的父节点、偏移值，结束点的父节点、偏移值，以及开始点的父节点和结束点的父节点的共同祖先节点（最近）
    //selectNode方法：commonAncestorContainer、endContainer、startContainer都等于传入节点的父节点，这里为section
    document.getElementById("txtStartContainer1").textContent = range1.startContainer.tagName;
    document.getElementById("txtStartOffset1").textContent = range1.startOffset;
    document.getElementById("txtEndContainer1").textContent = range1.endContainer.tagName;
    document.getElementById("txtEndOffset1").textContent = range1.endOffset;
    document.getElementById("txtCommonAncestor1").textContent = range1.commonAncestorContainer.tagName;

    //显示范围1的开始点的父节点、偏移值，结束点的父节点、偏移值，以及开始点的父节点和结束点的父节点的共同祖先节点（最近）
    //selectNodeContents方法：commonAncestorContainer、endContainer、startContainer都等于传入的节点，即article，startOffset始终为0，endOffset为子节点数量
    document.getElementById("txtStartContainer2").textContent = range2.startContainer.tagName;
    document.getElementById("txtStartOffset2").textContent = range2.startOffset;
    document.getElementById("txtEndContainer2").textContent = range2.endContainer.tagName;
    document.getElementById("txtEndOffset2").textContent = range2.endOffset;
    document.getElementById("txtCommonAncestor2").textContent = range2.commonAncestorContainer.tagName;
}
</script>
</head>

<body>
<section id="wrap">
    <article id="main">
        <h1>游子吟</h1>
        <h2>孟郊</h2>
        <p>慈母手中线，游子身上衣。临行密密缝，意恐迟迟归。谁言寸草心，报得三春晖。</p>
    </article>
    <header>
        <input type="button" value="创建范围" onclick="createrange()" />
    </header>
    <footer>
        <dl>
            <dt>范围1</dt>
            <dd>Start Container(开始点的父节点）:<span id="txtStartContainer1"></span></dd>
            <dd>Start Offset(开始点的偏移值）:<span id="txtStartOffset1"></span></dd>
            <dd>End Container(结束点的父节点）:<span id="txtEndContainer1"></span></dd>
            <dd>End Offset(结束点的偏移值）:<span id="txtEndOffset1"></span></dd>
            <dd>Common Ancestor（共同祖先节点）:<span id="txtCommonAncestor1"></span></dd>
        </dl>
        <dl>
            <dt>范围2</dt>
            <dd>Start Container(开始点的父节点）:<span id="txtStartContainer2"></span></dd>
            <dd>Start Offset(开始点的偏移值）:<span id="txtStartOffset2"></span></dd>
            <dd>End Container(结束点的父节点）:<span id="txtEndContainer2"></span></dd>
            <dd>End Offset(结束点的偏移值）:<span id="txtEndOffset2"></span></dd>
            <dd>Common Ancestor（共同祖先节点）:<span id="txtCommonAncestor2"></span></dd>
        </dl>
    </footer>
</section>
</body>
</html>
